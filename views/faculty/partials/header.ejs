<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - Internship Hub Faculty</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    /* ====== Base ====== */
    body {
      background-color: #f9fafb;
      font-family: 'Inter', sans-serif;
      margin: 0;
    }

    /* ====== Top Nav ====== */
    nav.top-nav {
      background: #fff;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      border-bottom: 1px solid #e5e7eb;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 50;
      height: 4rem; /* reduced height */
    }

    .top-nav .container {
      padding: 0.5rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 100%;
    }

    .top-nav h1 {
      font-size: 1rem;
      font-weight: bold;
      color: #111827;
      margin: 0;
    }

    .badge {
      font-size: 0.75rem;
      color: #6b7280;
      background: #f3f4f6;
      padding: 0.15rem 0.4rem;
      border-radius: 0.25rem;
    }

    /* ====== Buttons ====== */
    button {
      cursor: pointer;
      background: none;
      border: none;
      outline: none;
    }

    .btn-icon {
      padding: 0.25rem;
      color: #4b5563;
      transition: color 0.2s;
      position: relative;
    }

    .btn-icon:hover {
      color: #2563eb;
    }

    .notification-dot {
      position: absolute;
      top: 0;
      right: 0;
      transform: translate(25%, -25%);
      background: #ef4444;
      color: #fff;
      font-size: 0.7rem;
      padding: 0.05rem 0.3rem;
      border-radius: 9999px;
    }

    /* ====== Notification Dropdown ====== */
    .dropdown {
      display: none;
      position: absolute;
      right: 0;
      margin-top: 0.5rem;
      width: 16rem;
      background: #fff;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      border: 1px solid #e5e7eb;
      z-index: 50;
    }

    .dropdown-header {
      padding: 0.75rem;
      border-bottom: 1px solid #e5e7eb;
      font-weight: 600;
      color: #111827;
    }

    .dropdown-item {
      padding: 0.75rem;
      border-bottom: 1px solid #f3f4f6;
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      font-size: 0.875rem;
      transition: background 0.2s;
    }

    .dropdown-item:hover {
      background: #f9fafb;
    }

    .dropdown-item.unread {
      background: #eff6ff;
    }

    .dropdown-empty {
      padding: 0.75rem;
      text-align: center;
      color: #6b7280;
    }

    /* ====== Profile ====== */
    .profile {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.85rem;
    }

    .avatar {
      width: 1.75rem;
      height: 1.75rem;
      background: #2563eb;
      border-radius: 50%;
      color: #fff;
      font-size: 0.75rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ====== Sidebar ====== */
    .sidebar {
      width: 7rem; /* reduced width */
      background: #fff;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      border-right: 1px solid #e5e7eb;
      min-height: 100vh;
      position: fixed;
      left: 0;
      top: 3rem; /* match new top-nav height */
      padding: 1rem;
      font-size: 0.9rem;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .sidebar li {
      margin-bottom: 0.4rem;
    }

    .sidebar a {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem;
      border-radius: 0.4rem;
      color: #6b7280;
      text-decoration: none;
      transition: background 0.2s, color 0.2s;
    }

    .sidebar a:hover {
      background: #f9fafb;
      color: #2563eb;
    }

    .sidebar a.active {
      background: #eff6ff;
      color: #2563eb;
      font-weight: 600;
    }

    /* ====== Main Content ====== */
    main {
      margin-left: 12rem; /* match reduced sidebar */
      padding: 1rem;
      padding-top: 3.5rem; /* match reduced nav */
      flex: 1;
    }
  </style>
</head>
<body>
  <!-- Top Navigation -->
  <nav class="top-nav">
    <div class="container">
      <div style="display:flex; align-items:center; gap:0.5rem;">
        <div class="avatar" style="border-radius:0.3rem; width:1.75rem; height:1.75rem; background:#2563eb;">
          <i class="fas fa-graduation-cap" style="font-size:0.7rem;"></i>
        </div>
        <h1>Internship Hub</h1>
        <span class="badge">Faculty</span>
      </div>
      
      <div style="display:flex; align-items:center; gap:0.75rem;">
        <!-- Notifications -->
        <div class="relative">
          <button id="notificationBtn" class="btn-icon">
            <i class="fas fa-bell"></i>
            <% if (notifications && notifications.filter(n => !n.read).length > 0) { %>
              <span class="notification-dot"><%= notifications.filter(n => !n.read).length %></span>
            <% } %>
          </button>
          <div id="notificationDropdown" class="dropdown">
            <div class="dropdown-header">Notifications</div>
            <div class="max-h-64 overflow-y-auto">
              <% if (notifications && notifications.length > 0) { %>
                <% notifications.forEach(notification => { %>
                  <div class="dropdown-item <%= !notification.read ? 'unread' : '' %>">
                    <div>
                      <% if (notification.type === 'company_accept') { %>
                        <i class="fas fa-handshake" style="color:#10b981;"></i>
                      <% } else if (notification.type === 'lor_request') { %>
                        <i class="fas fa-file-alt" style="color:#f59e0b;"></i>
                      <% } else { %>
                        <i class="fas fa-certificate" style="color:#2563eb;"></i>
                      <% } %>
                    </div>
                    <div class="flex-1">
                      <p><%= notification.message %></p>
                      <p style="font-size:0.75rem; color:#6b7280; margin-top:0.2rem;"><%= notification.time %></p>
                    </div>
                  </div>
                <% }); %>
              <% } else { %>
                <div class="dropdown-empty">
                  <i class="fas fa-bell-slash" style="font-size:1.2rem; margin-bottom:0.4rem;"></i>
                  <p>No notifications</p>
                </div>
              <% } %>
            </div>
          </div>
        </div>

        <!-- Profile -->
        <div class="profile">
          <div class="avatar">FN</div>
          <span>Faculty Name</span>
        </div>
      </div>
    </div>
  </nav>

  <div class="flex pt-16">
    <!-- Sidebar -->
    <nav class="sidebar">
      <ul>
        <li><a href="/" class="<%= title === 'Faculty Dashboard' ? 'active' : '' %>"><i class="fas fa-chart-pie"></i>Dashboard</a></li>
        <li><a href="/companies" class="<%= title === 'Company Connections' ? 'active' : '' %>"><i class="fas fa-building"></i>Companies</a></li>
        <li><a href="/students" class="<%= title === 'Student Connections' ? 'active' : '' %>"><i class="fas fa-user-graduate"></i>Students</a></li>
        <li><a href="/resources" class="<%= title === 'Resources' ? 'active' : '' %>"><i class="fas fa-book"></i>Resources</a></li>
        <li><a href="/analytics" class="<%= title === 'Analytics Dashboard' ? 'active' : '' %>"><i class="fas fa-chart-bar"></i>Analytics</a></li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main>
      <!-- Page Content Here -->
    </main>
  </div>
</body>
</html>
