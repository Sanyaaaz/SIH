<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login | InternshipHub</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#4F46E5",
            secondary: "#F97316",
          }
        }
      }
    };
  </script>
</head>
<body class="bg-gray-50 font-sans">
  <div class="min-h-screen flex items-center justify-center">
    <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
      <h2 class="text-2xl font-bold mb-6 text-center">Login</h2>
      
      <% if (error) { %>
        <div class="bg-red-100 text-red-700 p-2 rounded mb-4"><%= error %></div>
      <% } %>
      
      <script>
        // Check for URL parameter and show message
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('message') === 'user-exists') {
          const messageDiv = document.createElement('div');
          messageDiv.className = 'bg-blue-100 text-blue-700 p-2 rounded mb-4';
          messageDiv.textContent = 'An account with this email already exists. Please log in instead.';
          document.querySelector('h2').after(messageDiv);
        }
      </script>
      
      <form action="/auth/login" method="POST" class="space-y-4">
        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
          <input id="email" name="email" type="email" required
                 class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
        </div>
        <!-- Password -->
        <div>
          <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
          <input id="password" name="password" type="password" required
                 class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary outline-none"/>
        </div>
        <!-- Role -->
        <div>
          <label for="role" class="block text-sm font-medium text-gray-700 mb-1">Login as</label>
          <select id="role" name="role" required
                  class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary outline-none">
            <option value="" disabled selected>Select your role</option>
            <option value="student">Student</option>
            <option value="faculty">Faculty</option>
            <option value="industry">Industry</option>
          </select>
        </div>
        <!-- Submit -->
        <button type="submit"
                class="w-full bg-primary text-white py-2 rounded-lg hover:bg-primary/90 transition">
          Login
        </button>
      </form>
      <p class="mt-4 text-center text-sm">
        Don't have an account? <a href="/auth/signup" class="text-primary font-medium">Sign up</a>
      </p>
    </div>
  </div>
</body>
</html>